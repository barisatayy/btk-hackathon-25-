<!doctype html>
<html lang=en>
<head>
    <meta charset=UTF-8>
    <title>Lainguage</title>
    <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css>
    <style>:root {
        --primary: #6e48aa;
        --secondary: #9d50bb;
        --dark: #1a1a2e;
        --light: #f1f1f1;
        --accent: #ff7b54;
        --text-gradient-1: #edeaf3;
        --text-gradient-2: #8c8c91;
        --text-gradient-3: #fff;
        --text-gradient-4: #c9d6ff;
        --transparent-white-1: rgba(255, 255, 255, 0.1);
        --transparent-white-2: rgba(255, 255, 255, 0.2);
        --transparent-white-3: rgba(255, 255, 255, 0.5);
        --transparent-white-4: rgba(255, 255, 255, 0.7);
        --transparent-dark-1: rgba(26, 26, 46, 0.6);
        --transparent-dark-2: rgba(26, 26, 46, 0.8);
        --transparent-primary-1: rgba(110, 72, 170, 0.8);
        --transparent-primary-2: rgba(157, 80, 187, 0.9);
        --shadow-color: rgba(0, 0, 0, 0.1);
        --shadow-accent: rgba(0, 0, 0, 0.2)
    }

    * {
        box-sizing: border-box
    }

    body {
        font-family: 'Segoe UI', system-ui, sans-serif;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        margin: 0;
        color: var(--light);
        overflow-x: hidden;
        width: 100%
    }

    ::-webkit-scrollbar {
        width: .01px
    }

    .header {
        grid-column: 1/-1;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
        background: linear-gradient(135deg, var(--transparent-primary-1), var(--transparent-primary-2));
        z-index: 1000;
        box-shadow: 0 2px 10px var(--shadow-color);
        position: relative
    }

    .header-right {
        position: absolute;
        right: 1rem;
        top: 3rem
    }

    .nav-bar {
        display: flex;
        gap: 1rem;
        margin-top: 1rem
    }

    .nav-bar a {
        color: #fff;
        text-decoration: none;
        padding: .5rem 1rem;
        border-radius: 20px;
        transition: all .3s ease;
        font-weight: 500;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        height: 40px
    }

    .nav-bar a::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--accent);
        transform: scaleX(0);
        transform-origin: right;
        transition: transform .3s ease
    }

    .nav-bar a:hover {
        background: var(--transparent-white-1)
    }

    .nav-bar a:hover::before {
        transform: scaleX(1);
        transform-origin: left
    }

    .nav-bar a.active {
        background: var(--transparent-white-2)
    }

    .header h1 {
        margin: 0;
        font-size: 2.5rem;
        background: linear-gradient(to right, var(--text-gradient-3), var(--text-gradient-4));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        display: flex;
        align-items: center;
        gap: 1rem
    }

    .Btn {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 45px;
        height: 45px;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition-duration: .3s;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, .199);
        background-color: #ff4141
    }

    .sign {
        width: 100%;
        transition-duration: .3s;
        display: flex;
        align-items: center;
        justify-content: center
    }

    .sign svg {
        width: 17px
    }

    .sign svg path {
        fill: white
    }

    .Btn:hover {
        width: 150px;
        border-radius: 40px;
        transition-duration: .3s
    }

    .Btn:hover .sign {
        width: 30%;
        transition-duration: .3s;
        padding-left: 20px
    }

    .text {
        position: absolute;
        left: 100%;
        transform: translateX(0);
        width: auto;
        opacity: 0;
        color: #fff;
        font-size: 1.2em;
        font-weight: 600;
        transition-duration: .3s;
        white-space: nowrap
    }

    .Btn:hover .text {
        left: 30%;
        width: auto;
        opacity: 1;
        transform: translateX(0);
        padding-right: 15px
    }

    .Btn:active {
        transform: translate(2px, 2px)
    }

    .bas1 {
        text-align: center;
        background: linear-gradient(to right, var(--text-gradient-1), var(--text-gradient-2));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        margin-top: 50px;
        margin-bottom: 30px
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateX(-50%) translateY(10px)
        }
        to {
            opacity: 1;
            transform: translateX(-50%) translateY(0)
        }
    }

    .dropdown {
        position: relative;
        display: inline-block
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background: var(--dark);
        min-width: 160px;
        box-shadow: 0 8px 16px var(--shadow-accent);
        z-index: 1;
        border-radius: 8px;
        overflow: hidden
    }

    .dropdown-content a {
        color: #fff;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
        height: auto
    }

    .dropdown-content a:hover {
        background: var(--transparent-primary-1)
    }

    .dropdown:hover .dropdown-content {
        display: block
    }

    .dropdown-toggle::after {
        content: ' ▼';
        font-size: .8em;
        margin-left: 4px
    }

    .level-slider {
        width: 100%;
        display: flex;
        justify-content: center;
        margin-bottom: 2rem
    }

    .slider-container {
        width: 80%;
        max-width: 600px;
        position: relative;
        padding: 10px 30px 30px;
        background: 0 0;
        transition: all .3s ease
    }

    .slider {
        width: 100%;
        height: 10px;
        -webkit-appearance: none;
        appearance: none;
        background: linear-gradient(90deg, var(--primary) 0, var(--secondary) 100%);
        outline: 0;
        border-radius: 15px;
        box-shadow: 0 0 15px rgba(0, 0, 0, .2), inset 0 2px 5px rgba(255, 255, 255, .1);
        transition: all .3s ease
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #fff;
        cursor: pointer;
        transition: all .3s ease;
        box-shadow: 0 0 15px rgba(255, 255, 255, .5), 0 0 25px var(--accent);
        border: 3px solid var(--accent);
        transform: scale(1)
    }

    .slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        background: var(--accent);
        box-shadow: 0 0 20px rgba(255, 255, 255, .8), 0 0 30px var(--accent)
    }

    .slider:active::-webkit-slider-thumb {
        transform: scale(1.3);
        background: #fff;
        box-shadow: 0 0 25px #fff, 0 0 40px var(--accent)
    }

    .slider-track {
        position: absolute;
        height: 10px;
        background: #fff;
        border-radius: 15px;
        top: 30px;
        left: 0;
        pointer-events: none;
        transition: width .3s ease;
        box-shadow: 0 0 10px #fff, 0 0 20px var(--accent);
        z-index: 1
    }

    .slider-labels {
        display: flex;
        width: calc(100% - 40px);
        margin: 20px 20px 0;
        position: relative;
        gap: 252px;
        justify-content: center;
        text-align: center
    }

    .slider-labels span {
        position: relative;
        width: 0;
        text-align: center;
        padding-top: 30px;
        flex: 1;
        max-width: 60px;
        justify-content: center
    }

    .slider-labels span::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 2px;
        height: 20px;
        background: #fff;
        opacity: .7
    }

    .slider-labels span:first-child {
        transform: translateX(50%)
    }

    .slider-labels span:last-child {
        transform: translateX(-50%)
    }

    .slider-labels span.active::before {
        height: 30px;
        background: var(--accent);
        opacity: 1;
        box-shadow: 0 0 10px var(--accent)
    }

    .slider-labels span {
        color: var(--text-gradient-3);
        font-weight: 700;
        cursor: pointer;
        transition: all .3s ease;
        background: 0 0
    }

    .slider-labels span:hover {
        color: #fff
    }

    .slider-labels span.active {
        color: #fff;
        transform: scale(1.1)
    }

    .level-content {
        text-align: center;
        margin: 20px auto;
        max-width: 1000px;
        padding: 30px;
        background: rgba(255, 255, 255, .1);
        border-radius: 15px;
        border: 2px solid rgba(255, 255, 255, .2);
        box-shadow: 0 5px 15px rgba(0, 0, 0, .1)
    }

    .topic-grid {
        display: grid;
        grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
        gap: 20px;
        margin-top: 20px
    }

    .topic-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        background: rgba(255, 255, 255, .05);
        border-radius: 12px;
        transition: all .3s ease;
        text-decoration: none;
        color: #fff;
        border: 1px solid rgba(255, 255, 255, .1)
    }

    .topic-item:hover {
        background: rgba(255, 255, 255, .15);
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, .2)
    }

    .topic-icon {
        font-size: 2.5rem;
        margin-bottom: 15px
    }

    .topic-item h3 {
        margin: 0 0 10px 0;
        font-size: 1.2rem;
        color: #fff
    }

    .topic-item p {
        margin: 0;
        font-size: .9rem;
        color: rgba(255, 255, 255, .7);
        line-height: 1.4
    }

    .topic-content {
        display: none;
        padding: 20px;
        margin-top: 40px;
        background: rgba(255, 255, 255, .1);
        border-radius: 15px;
        border: 2px solid rgba(255, 255, 255, .2);
        box-shadow: 0 5px 15px rgba(0, 0, 0, .1)
    }

    .back-button {
        background: var(--transparent-white-1);
        color: #fff;
        border: 1px solid var(--transparent-white-2);
        padding: .6rem 1.2rem;
        border-radius: 20px;
        cursor: pointer;
        font-size: .9rem;
        font-weight: 500;
        margin-bottom: 1.5rem;
        transition: all .3s ease;
        backdrop-filter: blur(5px);
        box-shadow: 0 2px 10px var(--shadow-color)
    }

    .back-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, var(--primary), var(--accent));
        z-index: -1;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform .4s cubic-bezier(.175, .885, .32, 1.275);
        border-radius: 20px
    }

    .back-button:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 0, 0, .2);
        color: #fff
    }

    .back-button:hover::before {
        transform: scaleX(1);
        transform-origin: left
    }

    .back-button:active {
        transform: translateY(0) scale(.98)
    }

    .ai-chat-container {
        margin-top: 2rem;
        border: 1px solid rgba(255, 255, 255, .2);
        border-radius: 10px;
        overflow: hidden;
        background: rgba(255, 255, 255, .05)
    }

    .chat-header {
        padding: 1rem;
        background: rgba(110, 72, 170, .5);
        text-align: center
    }

    .chat-messages {
        height: 300px;
        overflow-y: auto;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 1rem
    }

    .message {
        max-width: 80%;
        padding: .8rem 1rem;
        border-radius: 15px;
        word-wrap: break-word;
        margin: .5rem 0;
        position: relative
    }

    .user-message {
        align-self: flex-end;
        background: rgba(110, 72, 170, .7);
        border-bottom-right-radius: 5px;
        margin-left: auto;
        margin-right: 0
    }

    .ai-message {
        align-self: flex-start;
        background: rgba(255, 255, 255, .1);
        border-bottom-left-radius: 5px;
        margin-right: auto;
        margin-left: 0
    }

    .chat-input {
        display: flex;
        padding: 1rem;
        background: rgba(0, 0, 0, .1)
    }

    .chat-input input {
        flex: 1;
        padding: .8rem;
        border: none;
        border-radius: 20px;
        background: rgba(255, 255, 255, .1);
        color: #fff
    }

    .chat-input button {
        margin-left: 1rem;
        padding: .8rem 1.5rem;
        border: none;
        border-radius: 20px;
        background: var(--accent);
        color: #fff;
        cursor: pointer;
        transition: all .3s
    }

    .chat-input button:hover {
        background: #ff6b3d
    }</style>
</head>
<body>
<div class=header>
    <div class=header-right>
        <button class=Btn>
            <div class=sign>
                <svg viewBox="0 0 512 512">
                    <path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"></path>
                </svg>
            </div>
            <div class=text onclick=logout()>Logout</div>
        </button>
    </div>
    <h1>Lainguage</h1>
    <nav class=nav-bar>
        <a href=/>Collections</a>
        <div class=dropdown>
            <a class="dropdown-toggle active">Lain Tool's</a>
            <div class=dropdown-content>
                <a href=/aiagents/teacher>Teacher</a>
                <a href=/aiagents/generator>Generator</a>
            </div>
        </div>
        <a href=/quiz>Quiz</a>
        <a href=/trainslate>Trainslate</a>
    </nav>
</div>
<div class=level-slider>
    <div class=slider-container>
        <input type=range min=1 max=3 value=1 class=slider id=levelSlider>
        <div class=slider-labels>
<span>
Giriş
</span>
            <span>Orta</span>
            <span>İleri</span>
        </div>
    </div>
</div>
<main id=level-contents>
    <article class=level-content id=level-1 data-level=1>
        <h1>Giriş</h1>
        <div class=topic-list>
            <div class=topic-grid>
                <div class=topic-item data-topic=family>
                    <div class=topic-icon>👪</div>
                    <h3>Aile Bilgileri</h3>
                    <p>Aile üyeleri ve kişisel bilgiler</p></div>
                <div class=topic-item data-topic=alphabet>
                    <div class=topic-icon>🔤</div>
                    <h3>Alfabe ve Telaffuz</h3>
                    <p>Temel harfler ve doğru telaffuz kuralları</p></div>
                <div class=topic-item data-topic=numbers>
                    <div class=topic-icon>🔢</div>
                    <h3>Sayılar</h3>
                    <p>Temel sayılar ve sayma kuralları</p></div>
                <div class=topic-item data-topic=colors>
                    <div class=topic-icon>🎨</div>
                    <h3>Renkler</h3>
                    <p>Temel renkler ve tanımlamalar</p></div>
                <div class=topic-item data-topic=days>
                    <div class=topic-icon>📅</div>
                    <h3>Günler</h3>
                    <p>Haftanın günleri ve zaman ifadeleri</p></div>
                <div class=topic-item data-topic=daily>
                    <div class=topic-icon>👋</div>
                    <h3>Selamlaşma ve Tanışma</h3>
                    <p>Günlük diyaloglar ve tanışma ifadeleri</p></div>
                <div class=topic-item data-topic=verbs>
                    <div class=topic-icon>🏃</div>
                    <h3>Temel Fiiller</h3>
                    <p>"to be", "have" gibi temel fiiller</p></div>
                <div class=topic-item data-topic=ask>
                    <div class=topic-icon>❓</div>
                    <h3>Soru Kelimeleri</h3>
                    <p>"What", "where" gibi temel soru kalıpları</p></div>
                <div class=topic-item data-topic=time>
                    <div class=topic-icon>🕒</div>
                    <h3>Zaman İfadeleri</h3>
                    <p>Saatler, zaman zarfları ve temel zaman ifadeleri</p></div>
            </div>
        </div>
        <div id=family-content class=topic-content></div>
        <div id=alphabet-content class=topic-content></div>
        <div id=numbers-content class=topic-content></div>
        <div id=colors-content class=topic-content></div>
        <div id=days-content class=topic-content></div>
        <div id=daily-content class=topic-content></div>
        <div id=verbs-content class=topic-content></div>
        <div id=ask-content class=topic-content></div>
        <div id=time-content class=topic-content></div>
    </article>
    <article class=level-content id=level-2 data-level=2>
        <h1>Orta</h1>
        <div class=topic-list>
            <div class=topic-grid>
                <div class=topic-item data-topic=conditionals>
                    <div class=topic-icon>🔀</div>
                    <h3>Şartlı Cümleler</h3>
                    <p>Type 1 ve Type 2 Conditionals arasındaki farkları öğrenme.</p></div>
                <div class=topic-item data-topic=tenses-perfect-simple>
                    <div class=topic-icon>🕰️</div>
                    <h3>Present Perfect & Past Simple</h3>
                    <p>Bu iki önemli zaman kipi arasındaki temel farkları pratik etme.</p></div>
                <div class=topic-item data-topic=modals-obligation>
                    <div class=topic-icon>📜</div>
                    <h3>Gereklilik Kipleri</h3>
                    <p>'Must', 'have to' ve 'should' arasındaki nüansları anlama.</p></div>
                <div class=topic-item data-topic=passive-voice>
                    <div class=topic-icon>📦</div>
                    <h3>Edilgen Çatı (Passive Voice)</h3>
                    <p>Cümlenin odağını değiştirmeyi ve edilgen yapıyı öğrenme.</p></div>
            </div>
        </div>
        <div id=conditionals-content class=topic-content></div>
        <div id=tenses-perfect-simple-content class=topic-content></div>
        <div id=modals-obligation-content class=topic-content></div>
        <div id=passive-voice-content class=topic-content></div>
    </article>
    <article class=level-content id=level-3 data-level=3>
        <h1>İleri</h1>
        <div class=topic-list>
            <div class=topic-grid>
                <div class=topic-item data-topic=vocab-nuance>
                    <div class=topic-icon>🔍</div>
                    <h3>Kelime Nüansları</h3>
                    <p>Eş anlamlı kelimeler arasındaki ince anlam farklarını öğrenme.</p></div>
                <div class=topic-item data-topic=formal-informal>
                    <div class=topic-icon>👔</div>
                    <h3>Resmi ve Gayriresmi Dil</h3>
                    <p>Farklı durumlarda (iş, arkadaş vb.) doğru dil kullanımını pratik etme.</p></div>
                <div class=topic-item data-topic=advanced-punctuation>
                    <div class=topic-icon>✒️</div>
                    <h3>İleri Düzey Noktalama</h3>
                    <p>Noktalı virgül, iki nokta gibi işaretlerle karmaşık cümleler kurma.</p></div>
            </div>
        </div>
        <div id=vocab-nuance-content class=topic-content></div>
        <div id=formal-informal-content class=topic-content></div>
        <div id=advanced-punctuation-content class=topic-content></div>
    </article>
</main>
<script>
    document.addEventListener("DOMContentLoaded", (function () {
        const e = document.getElementById("levelSlider"), t = document.querySelectorAll(".slider-labels span"),
            n = document.querySelectorAll(".level-content");
        let s = null, a = !1;

        async function o(e) {
            const t = document.getElementById(`userMessage-${e}`), n = t.value.trim(),
                s = document.getElementById(`sendMessage-${e}`);
            if (n && !a) {
                c(n, !0, e), t.value = "", s.disabled = !0, t.disabled = !0, a = !0;
                try {
                    const o = await fetch("/api/chat", {
                        method: "POST",
                        headers: {"Content-Type": "application/json"},
                        body: JSON.stringify({message: n, topicId: e})
                    });
                    if (!o.ok) throw new Error("Sunucu yanıtı başarısız.");
                    const l = await o.json();
                    l.botResponse && c(l.botResponse, !1, e)
                } catch (t) {
                    console.error("Mesaj gönderilirken hata:", t), c("Üzgünüm, bir hata oluştu. Lütfen tekrar deneyin.", !1, e)
                } finally {
                    s.disabled = !1, t.disabled = !1, t.focus(), a = !1
                }
            }
        }

        function c(e, t, n) {
            const s = document.getElementById(`chatMessages-${n}`);
            if (!s) return;
            const a = document.createElement("div");
            a.className = "message " + (t ? "user-message" : "ai-message"), a.textContent = e, s.appendChild(a), s.scrollTop = s.scrollHeight
        }

        function l(e) {
            n.forEach((e => e.style.display = "none")), t.forEach((e => e.classList.remove("active")));
            const s = document.getElementById(`level-${e}`);
            if (s) {
                s.style.display = "block";
                const e = s.querySelector(".topic-list");
                e && (e.style.display = "block"), s.querySelectorAll(".topic-content").forEach((e => e.style.display = "none"))
            }
            document.querySelector(`.slider-labels span:nth-child(${e})`).classList.add("active")
        }

        function i(e) {
            const t = e.target.closest(".topic-content"), n = e.target.closest(".level-content");
            if (t && (t.style.display = "none", t.innerHTML = ""), n) {
                const e = n.querySelector(".topic-list");
                e && (e.style.display = "block")
            }
            s = null
        }

        e.addEventListener("input", (e => l(e.target.value))), t.forEach(((t, n) => {
            t.addEventListener("click", (() => {
                e.value = n + 1, l(n + 1)
            }))
        })), document.querySelectorAll(".topic-item").forEach((e => {
            e.addEventListener("click", (function (e) {
                e.preventDefault();
                !async function (e, t) {
                    if (a) return;
                    a = !0, s = e;
                    const n = document.getElementById(`${e}-content`), l = t.querySelector("h3").textContent,
                        r = t.querySelector("p").textContent;
                    n.innerHTML = function (e, t, n) {
                        return `\n            <button class="back-button">Geri Dön</button>\n            <h2>${t}</h2>\n            <p>${n}</p>\n            <div class="ai-chat-container">\n                <div class="chat-header"><h3>AI Öğretmen ile Pratik Yap</h3></div>\n                <div class="chat-messages" id="chatMessages-${e}"></div>\n                <div class="chat-input">\n                    <input type="text" id="userMessage-${e}" placeholder="Mesajınızı yazın..." />\n                    <button id="sendMessage-${e}">Gönder</button>\n                </div>\n            </div>\n        `
                    }(e, l, r), n.querySelector(".back-button").addEventListener("click", i), n.querySelector(`#sendMessage-${e}`).addEventListener("click", (() => o(e))), n.querySelector(`#userMessage-${e}`).addEventListener("keypress", (t => {
                        "Enter" === t.key && o(e)
                    })), t.closest(".topic-list").style.display = "none", n.style.display = "block";
                    try {
                        const t = await fetch("/api/chat", {
                            method: "POST",
                            headers: {"Content-Type": "application/json"},
                            body: JSON.stringify({message: "", topicId: e})
                        });
                        if (!t.ok) {
                            const e = await t.json();
                            throw new Error(e.message || "Sunucu hatası.")
                        }
                        const n = await t.json();
                        n.botResponse && c(n.botResponse, !1, e)
                    } catch (t) {
                        console.error("Sohbet başlatılırken hata:", t), c("Merhaba! Bir sorun oluştu, ancak yine de pratik yapmaya başlayabiliriz.", !1, e)
                    } finally {
                        a = !1
                    }
                }(this.getAttribute("data-topic"), this)
            }))
        })), l(e.value)
    }))</script>
</body>
</html>